<header class="header">
    <div class="container">
        <h1 class="header__title">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>
            Timeline View
        </h1>
        <div class="header__subtitle">Chronological Report Overview</div>
    </div>
</header>

<main class="container main-content">
    <!-- Filter Bar -->
    <div class="filter-bar">
        <!-- Department Filters -->
        <div class="filter-group">
            <label class="filter-group__label">Department</label>
            <div class="button-group">
                <span class="sliding-highlight" [style.transform]="deptHighlightStyle().transform" [style.width]="deptHighlightStyle().width"></span>
                @for(dept of departmentOptions; track dept; let i = $index) {
                    <button #deptBtn 
                            (click)="selectDepartment(dept, i)" 
                            class="filter-button" 
                            [class.active]="selectedDepartment() === dept">
                        {{ dept === 'All' ? 'All' : dept }}
                    </button>
                }
            </div>
        </div>

        <!-- Status Filters -->
        <div class="filter-group">
            <label class="filter-group__label">Status</label>
            <div class="button-group">
                <span class="sliding-highlight" [style.transform]="statusHighlightStyle().transform" [style.width]="statusHighlightStyle().width"></span>
                @for(status of statusOptions; track status; let i = $index) {
                    <button #statusBtn 
                            (click)="selectStatus(status, i)" 
                            class="filter-button" 
                            [class.active]="selectedStatus() === status">
                        {{ status === 'All' ? 'All' : status }}
                    </button>
                }
            </div>
        </div>
    </div>

    <div class="timeline">
        @for (report of filteredReports(); track report.id) {
            <div class="timeline-item">
                <div class="timeline-item__connector">
                    <div class="timeline-item__dot" [class]="statusClasses[report.status]"></div>
                    <div class="timeline-item__line"></div>
                </div>
                <div class="timeline-item__content">
                    <div class="content-header">
                        <h3 class="report-title" [class]="statusClasses[report.status]">{{ report.title }}</h3>
                        <span class="report-date">{{ report.date }}</span>
                    </div>
                    <div class="report-department">
                        @switch (report.department) {
                            @case ('Finance') { <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="1" x2="12" y2="23"></line><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path></svg> }
                            @case ('Engineering') { <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"></path></svg> }
                            @case ('Marketing') { <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 22a10 10 0 1 1 0-20 10 10 0 0 1 0 20Z"></path><path d="M12 12a5 5 0 1 0 0-10 5 5 0 0 0 0 10Z"></path><path d="M12 12a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg> }
                            @case ('Human Resources') { <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg> }
                        }
                        <span>{{ report.department }}</span>
                    </div>
                    <p class="report-description">{{ report.description }}</p>
                    <div class="content-footer">
                        <button class="download-button">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg>
                            <span>{{ report.title.replace(' ', '_') }}-{{report.department}}-{{report.date}}.{{report.fileType.toLowerCase()}}</span>
                        </button>
                    </div>
                </div>
            </div>
        } @empty {
            <p class="empty-message">No reports found matching your criteria.</p>
        }
    </div>
</main>

